<Window x:Class="ActiveCampWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ActiveCampWPF"
        xmlns:EFT="clr-namespace:ActiveCamp.BL.Model;assembly=ActiveCamp.BL"
        xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
        mc:Ignorable="d"
        Title="Active Camp" 
        Height="500" Width="1000"
        MinHeight="500" MinWidth="360" 
        Initialized="Window_Initialized" 
        Loaded="Window_Loaded">

    <Window.Resources>

        <EFT:RecordsOfEqipmentsTable x:Key="recordsOfEqipmentsTable"/>
        <EFT:RecordsOfFoodTable x:Key="foodRecords"/>
        <EFT:RecordsOfFoodTablePerPerson x:Key="recordsOfFoodTablePerPerson"/>

        <CollectionViewSource x:Key="recordsOfEqipmentsTable_cvs" Source="{StaticResource recordsOfEqipmentsTable}">

            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription PropertyName="OwnerID"/>
            </CollectionViewSource.GroupDescriptions>

            <CollectionViewSource.SortDescriptions>
                <scm:SortDescription PropertyName="OwnerID"/>
            </CollectionViewSource.SortDescriptions>

        </CollectionViewSource>

        <CollectionViewSource x:Key="food_cvsRecords" Source="{StaticResource foodRecords}">

            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription PropertyName="Day"/>
                <PropertyGroupDescription PropertyName="FoodTime"/>
            </CollectionViewSource.GroupDescriptions>

            <CollectionViewSource.SortDescriptions>
                <scm:SortDescription PropertyName="FoodName"/>
            </CollectionViewSource.SortDescriptions>

        </CollectionViewSource>

        <CollectionViewSource x:Key="cvsRecordsOfFoodTablePerPerson" Source="{StaticResource recordsOfFoodTablePerPerson}">

            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription PropertyName="Person"></PropertyGroupDescription>
            </CollectionViewSource.GroupDescriptions>

        </CollectionViewSource>

    </Window.Resources>
    
    <Grid x:Name="Background_of_window">

        <!-- now is "true" for aproove, default "false" -->
        <Grid x:Name="Main_controls" IsEnabled="True">

            <!--#region Image of Window background -->
            
                <Image x:Name="mainPicture" Grid.Row="0" Grid.Column="0" 
                       HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Stretch="UniformToFill" Source="Resources/Images/reka_trava_derevia_153970_1920x1080.jpg">
                    <Image.BitmapEffect>
                        <BlurBitmapEffect Radius="0" KernelType="Gaussian"></BlurBitmapEffect>
                    </Image.BitmapEffect>
                </Image>
            
            <!--#endregion-->
            
            <Grid Grid.Row="0" Grid.Column="0" x:Name="MainPlace">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60"></ColumnDefinition>
                    <ColumnDefinition Width="300"></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                </Grid.ColumnDefinitions>
                
                <Grid.RowDefinitions>
                    <RowDefinition Height="60"></RowDefinition>
                    <RowDefinition></RowDefinition>
                </Grid.RowDefinitions>

                <!--#region Header Of Sections-->
                <TextBox x:Name="HeaderOfSection" Grid.Row="0" Grid.Column="1" Margin="2,2,2,2" 
                         FontWeight="Bold" FontSize="34" TextWrapping="Wrap" TextAlignment="Center"
                         Foreground="AliceBlue" Background="{x:Null}" BorderThickness="0"  
                         HorizontalAlignment="Center" VerticalAlignment="Center"
                         IsEnabled="{Binding IsEnabled, ElementName=Background_of_window}" Focusable="False"
                         Text="Подготовка" Cursor="Arrow">
                </TextBox>
                <!--#endregion-->
                
                <!--#region Menu Button -->
                <Button x:Name="MenuButton" Width="50" Height="50" Click="MenuButton_Click" 
                        IsEnabled="{Binding IsEnabled, ElementName=Background_of_window}">
                    <Button.Template>
                        <ControlTemplate TargetType="{x:Type Button}" x:Name="MenuButtonTemplate">
                            <Border x:Name="MenuButtonBorder"
                                    CornerRadius="25"
                                    BorderBrush = "AliceBlue"
                                    BorderThickness = "0"
                                    Background = "#0000">
                                <Grid Width="30" Height="30" VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Path Stroke="{TemplateBinding Background}" StrokeThickness="3" Margin="0,1,0,1">
                                        <Path.Data>
                                            <PathGeometry>
                                                <PathFigure IsClosed="False" StartPoint="3,4">
                                                    <LineSegment Point="28,4" />
                                                </PathFigure>
                                            </PathGeometry>
                                        </Path.Data>
                                    </Path>
                                    <Path Stroke="{TemplateBinding Background}" StrokeThickness="3" 
                                          Margin="0,1,0,1">
                                        <Path.Data>
                                            <PathGeometry>
                                                <PathFigure IsClosed="False" StartPoint="3,14">
                                                    <LineSegment Point="28,14" />
                                                </PathFigure>
                                            </PathGeometry>
                                        </Path.Data>
                                    </Path>
                                    <Path Stroke="{TemplateBinding Background}" StrokeThickness="3" 
                                          Margin="0,1,0,1">
                                        <Path.Data>     
                                            <PathGeometry>
                                                <PathFigure IsClosed="False" StartPoint="3,24">
                                                    <LineSegment Point="28,24" />
                                                </PathFigure>
                                            </PathGeometry>
                                        </Path.Data>
                                    </Path>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Trigger.Setters>
                                        <Setter TargetName="MenuButtonBorder" Property="Cursor" Value="Hand"/>
                                    </Trigger.Setters>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="true">
                                    <Trigger.Setters>
                                        <Setter TargetName="MenuButtonBorder" Property="Opacity" Value="0.75"></Setter>
                                    </Trigger.Setters>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                    <Button.Triggers>
                        <EventTrigger RoutedEvent="Button.Click">
                            <EventTrigger.Actions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="MainMenuPanel" 
                                                         Storyboard.TargetProperty="(Grid.Width)"
                                                         Duration="0:0:0:0.28"
                                                         From="0" To="320"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger.Actions>
                        </EventTrigger>
                    </Button.Triggers>
                </Button>
                <!--#endregion-->
                
                <!--#region AI Agent control element -->

                <Button x:Name="AI_agent" Grid.Column="2" Click="AI_agent_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="AI_agent_border" CornerRadius="10" Margin="5">
                                <Border.Background>
                                    <SolidColorBrush Color="White" Opacity="0.65"></SolidColorBrush>
                                </Border.Background>
                                <Grid Margin="7">
                                    <TextBlock x:Name="AI_agent_NotyficationTextblock"></TextBlock>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Trigger.Setters>
                                        <Setter TargetName="AI_agent_border" Property="BorderBrush" Value="Gray"></Setter>
                                        <Setter TargetName="AI_agent_border" Property="Cursor" Value="Hand"/>
                                    </Trigger.Setters>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="true">
                                    <Trigger.Setters>
                                        <Setter TargetName="AI_agent_border" Property="Opacity" Value="0.75"></Setter>
                                    </Trigger.Setters>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <!--#endregion-->

                <!--#region News Section -->
                
                <Grid x:Name="News_Section" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="3"
                      IsEnabled="False" Visibility="Hidden">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <!-- News List -->
                    <ListBox x:Name="NewsList" Grid.Column="1" Grid.Row="1" Margin="0,0,0,5"
                         IsEnabled="{Binding IsEnabled, ElementName=Background_of_window}" SelectionChanged="NewsList_SelectionChanged">
                        <ListBox.Background>
                            <SolidColorBrush Color="Azure" Opacity="0.25"></SolidColorBrush>
                        </ListBox.Background>
                        <ListBox.Template>
                            <ControlTemplate TargetType="{x:Type ListBox}">
                                <Border Background="{TemplateBinding Background}" BorderBrush="Black" BorderThickness="0" CornerRadius="10,0,0,10">
                                    <ScrollViewer Margin="0" Focusable="{Binding Focusable, ElementName=Main_controls}">
                                        <ItemsControl>
                                            <StackPanel Margin="2" IsItemsHost="True" />
                                        </ItemsControl>
                                    </ScrollViewer>
                                </Border>
                            </ControlTemplate>
                        </ListBox.Template>
                        <ListBox.Items>
                            <ListBoxItem Background="{x:Null}" Width="290" VerticalAlignment="Center" HorizontalAlignment="Center" Selected="ListBoxItem_Selected">
                                <local:NewHikkingListItem Width="280" Height="60"></local:NewHikkingListItem>
                            </ListBoxItem>
                        </ListBox.Items>
                    </ListBox>

                    <!-- News description-->
                    <RichTextBox Grid.Column="2" Grid.Row="0" Margin="0,0,5,5" Grid.RowSpan="2"
                                    FontSize="14" FontWeight="Bold"
                                    IsEnabled="{Binding IsEnabled, ElementName=Background_of_window}">
                        <RichTextBox.Background>
                            <SolidColorBrush Color="Azure" Opacity="0.85"></SolidColorBrush>
                        </RichTextBox.Background>
                        <RichTextBox.Template>
                            <ControlTemplate TargetType="{x:Type RichTextBox}">
                                <Border Background="{TemplateBinding Background}" BorderThickness="0" BorderBrush="Black" CornerRadius="0,20,20,0">
                                    <ScrollViewer Margin="10" x:Name="PART_ContentHost"/>
                                </Border>
                            </ControlTemplate>
                        </RichTextBox.Template>
                        <FlowDocument>
                            <Paragraph>
                                <Run Text="check the vision"/>
                            </Paragraph>
                        </FlowDocument>
                    </RichTextBox>
                
                    <Grid x:Name="SortGridOfNewsSection">
                        
                        <Grid.RowDefinitions>
                            <RowDefinition Height="10"></RowDefinition>
                            <RowDefinition Height="60"></RowDefinition>
                            <RowDefinition Height="60"></RowDefinition>
                            <RowDefinition Height="60"></RowDefinition>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>

                        <Grid.Resources>
                            
                            <Style x:Key="StyleForSortToggleButtons" TargetType="ToggleButton">
                                
                                <Setter Property="ToggleButton.Background">
                                    <Setter.Value>
                                        <SolidColorBrush Color="White" Opacity="0.55"></SolidColorBrush>
                                    </Setter.Value>
                                </Setter>
                                
                                <Setter Property="ToggleButton.FontSize" Value="14"></Setter>
                                <Setter Property="ToggleButton.FontStyle" Value="Normal"></Setter>
                                <Setter Property="ToggleButton.FontWeight" Value="Bold"></Setter>
                                <Setter Property="ToggleButton.FontFamily" Value="TimesNewRoman"></Setter>
                                <Setter Property="ToggleButton.VerticalAlignment" Value="Center"></Setter>
                                <Setter Property="ToggleButton.HorizontalAlignment" Value="Center"></Setter>
                                <Setter Property="ToggleButton.Margin" Value="2"></Setter>
                                
                                <Setter Property="ToggleButton.Template">
                                    
                                    <Setter.Value>
                                        
                                        <ControlTemplate TargetType="ToggleButton">
                                            
                                            <Border x:Name="BorderOfSortToggleButton_ToggleButton" 
                                                    CornerRadius="10" BorderThickness="0" Background="{TemplateBinding Background}">
                                                <ContentPresenter Content="{TemplateBinding Content}"/>
                                            </Border>
                                            
                                            <ControlTemplate.Triggers>
                                                
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="BorderOfSortToggleButton_ToggleButton" Property="Cursor" Value="Hand"/>
                                                    </Trigger.Setters>
                                                </Trigger>
                                                
                                                <Trigger Property="IsPressed" Value="true">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="BorderOfSortToggleButton_ToggleButton" Property="Opacity" Value="0.75"></Setter>
                                                    </Trigger.Setters>
                                                </Trigger>
                                                
                                                <Trigger Property="IsChecked" Value="True">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="BorderOfSortToggleButton_ToggleButton" Property="Background">
                                                            <Setter.Value>
                                                                <SolidColorBrush Color="White" Opacity="1"></SolidColorBrush>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger.Setters>
                                                </Trigger>
                                                
                                                <Trigger Property="IsChecked" Value="False">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="BorderOfSortToggleButton_ToggleButton" Property="Background" Value="White"></Setter>
                                                        <Setter TargetName="BorderOfSortToggleButton_ToggleButton" Property="Opacity" Value="0.55"></Setter>
                                                    </Trigger.Setters>
                                                </Trigger>
                                            
                                            </ControlTemplate.Triggers>
                                        
                                        </ControlTemplate>
                                    
                                    </Setter.Value>
                                
                                </Setter>
                                
                            </Style>
                        </Grid.Resources>

                        <ToggleButton x:Name="SortbyFavorFlag" Style="{StaticResource StyleForSortToggleButtons}" Grid.Row="1">
                            <ToggleButton.Content>
                                <Grid Width="55" Height="55">
                                    <Path Stroke="Black" StrokeThickness="2" Fill="Red">
                                        <Path.Data>
                                            <PathGeometry>
                                                <PathFigure StartPoint="15,9" IsFilled="True" IsClosed="True">
                                                    <LineSegment Point="15,47"/>
                                                    <LineSegment Point="27,35"/>
                                                    <LineSegment Point="40,47"/>
                                                    <LineSegment Point="40,9"/>
                                                </PathFigure>
                                            </PathGeometry>
                                        </Path.Data>
                                    </Path>
                                </Grid>
                            </ToggleButton.Content>
                        </ToggleButton>

                        <ToggleButton x:Name="SortbyFavorAdminMessage" Style="{StaticResource StyleForSortToggleButtons}" Grid.Row="2">
                            <ToggleButton.Content>
                                <Grid Width="55" Height="55">
                                    <Path Stroke="Black" StrokeThickness="2" Fill="Yellow">
                                        <Path.Data>
                                            <PathGeometry>
                                                <PathFigure StartPoint="27.5,5" IsFilled="True" IsClosed="True">
                                                    <LineSegment Point="19,18"/>
                                                    
                                                    <LineSegment Point="6.5,18"/>
                                                    <LineSegment Point="17,30"/>
                                                    
                                                    <LineSegment Point="10,47"/>
                                                    
                                                    <LineSegment Point="27.5,35"/>
                                                    
                                                    <LineSegment Point="45,47"/>
                                                    <LineSegment Point="38,30"/>
                                                    
                                                    <LineSegment Point="48.5,18"/>
                                                    <LineSegment Point="35,18"/>
                                                </PathFigure>
                                            </PathGeometry>
                                        </Path.Data>
                                    </Path>
                                </Grid>
                            </ToggleButton.Content>
                        </ToggleButton>

                    </Grid>
                
                </Grid>

                <!--#endregion-->

                <!-- #region Hikking Section-->

                <Grid x:Name="Hikking_Section" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2"
                      IsEnabled="False" Visibility="Hidden">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>
  
                    <!--#region Main form of hiking list-->
                        <ListBox x:Name="HikkingList" Grid.Column="0" Grid.Row="1" Margin="0,0,0,55"
                             IsEnabled="{Binding IsEnabled, ElementName=Background_of_window}" SelectionChanged="NewsList_SelectionChanged">
                            <ListBox.Background>
                                <SolidColorBrush Color="Azure" Opacity="0.25"></SolidColorBrush>
                            </ListBox.Background>
                            <ListBox.Template>
                                <ControlTemplate TargetType="{x:Type ListBox}">
                                    <Border Background="{TemplateBinding Background}" BorderBrush="Black" BorderThickness="0" CornerRadius="10,0,0,0">
                                        <ScrollViewer Margin="0" Focusable="{Binding Focusable, ElementName=Main_controls}">
                                            <ItemsControl>
                                                <StackPanel Margin="4" IsItemsHost="True" HorizontalAlignment="Center" VerticalAlignment="Center"></StackPanel>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Border>
                                </ControlTemplate>
                            </ListBox.Template>
                        </ListBox>

                        <!-- "Add new hikking" button -->
                        
                        <Button x:Name="AddNewHikking"
                                Grid.Column="0" Grid.Row="0" Margin="0,0,0,5" 
                                Height="50" VerticalAlignment="Bottom" Click="AddNewHikking_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="{x:Type Button}">
                                    <Border x:Name="BorderOfAddNewHiikingButton" BorderBrush="Black" BorderThickness="0" CornerRadius="0,0,0,10">
                                        <Border.Background>
                                            <SolidColorBrush Color="AliceBlue" Opacity="0.55"></SolidColorBrush>
                                        </Border.Background>
                                        <Grid>
                                            <Grid Width="35" Height="35" Margin="0,0,25,0"
                                              HorizontalAlignment="Right" VerticalAlignment="Center">
                                                <Path Stroke="Black" StrokeThickness="4">
                                                    <Path.Data>
                                                        <PathGeometry>
                                                            <PathFigure StartPoint="18,7" IsClosed="False">
                                                                <LineSegment Point="18,29"></LineSegment>
                                                            </PathFigure>
                                                            <PathFigure StartPoint="7,17">
                                                                <LineSegment Point="29,17"></LineSegment>
                                                            </PathFigure>
                                                        </PathGeometry>
                                                    </Path.Data>
                                                </Path>
                                            </Grid>
                                            <Label Content="Добавить запись" HorizontalAlignment="Center" VerticalAlignment="Center"
                                                   FontFamily="TimesNewRoman" FontSize="22" FontWeight="Bold" 
                                                   Width="200"></Label>
                                        </Grid>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Trigger.Setters>
                                                <Setter TargetName="BorderOfAddNewHiikingButton" Property="BorderBrush" Value="Gray"></Setter>
                                                <Setter TargetName="BorderOfAddNewHiikingButton" Property="Cursor" Value="Hand"/>
                                            </Trigger.Setters>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="true">
                                            <Trigger.Setters>
                                                <Setter TargetName="BorderOfAddNewHiikingButton" Property="Opacity" Value="0.75"></Setter>
                                            </Trigger.Setters>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <!-- Hikking description -->
                        <RichTextBox x:Name="Discription_of_Hikking" Grid.Column="1" Grid.Row="0" Margin="0,0,5,5"
                            FontSize="14" FontWeight="Bold"
                            IsEnabled="{Binding IsEnabled, ElementName=Background_of_window}">
                            <RichTextBox.Background>
                                <SolidColorBrush Color="Azure" Opacity="0.85"></SolidColorBrush>
                            </RichTextBox.Background>
                            <RichTextBox.Template>
                                <ControlTemplate TargetType="{x:Type RichTextBox}">
                                    <Border Background="{TemplateBinding Background}" BorderThickness="0" BorderBrush="Black" CornerRadius="0,20,20,0">
                                        <ScrollViewer Margin="10" x:Name="PART_ContentHost"/>
                                    </Border>
                                </ControlTemplate>
                            </RichTextBox.Template>
                            <FlowDocument>
                                <Paragraph>
                                    <Run Text=""/>
                                </Paragraph>
                            </FlowDocument>
                        </RichTextBox>

                    <!--#endregion-->
                    
                    <!--#region Form of new trip request -->
                    
                    <Border x:Name="NewHikkingFormBorder" CornerRadius="10" 
                            Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,5,5"
                            ScrollViewer.CanContentScroll="True"
                            Visibility="Hidden" IsEnabled="False">
                        <Border.Background>
                            <SolidColorBrush Color="AliceBlue" Opacity="0.85"></SolidColorBrush>
                        </Border.Background>

                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Hidden"
                                      Margin="7">
                            <Grid x:Name="NewHikkingForm" Margin="10"
                                  ScrollViewer.CanContentScroll="True">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="50"></RowDefinition>
                                    <RowDefinition></RowDefinition>
                                </Grid.RowDefinitions>

                                <Label Content="Создание заявки на проведение тур-похода" 
                                       HorizontalAlignment="Left" VerticalAlignment="Center"
                                       FontSize="24" FontWeight="ExtraBold" FontFamily="TimesnewFamily"></Label>

                                <Button x:Name="BackFromCreatingWindow" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Right" VerticalAlignment="Top" 
                                        Margin="0,5,5,0" Width="35" Height="35" Click="BackFromCreatingWindow_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="BackFromCreatingWindowBorder" 
                                                    Background="Transparent"
                                                    BorderBrush="Black" BorderThickness="1" CornerRadius="20"
                                                    Height="{TemplateBinding Height}" Width="{TemplateBinding Width}">
                                                <Grid x:Name="FieldOfButton">
                                                    <Path x:Name="ArrowIcon" Stroke="Black" StrokeThickness="3">
                                                        <Path.Data>
                                                            <PathGeometry>
                                                                <PathFigure StartPoint="4,16" IsClosed="False">
                                                                    <LineSegment Point="27,16"></LineSegment>
                                                                </PathFigure>
                                                                <PathFigure StartPoint="18,8" IsClosed="False">
                                                                    <LineSegment Point="27,16"></LineSegment>
                                                                    <LineSegment Point="18,24"></LineSegment>
                                                                </PathFigure>
                                                            </PathGeometry>
                                                        </Path.Data>
                                                    </Path>
                                                </Grid>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="BackFromCreatingWindowBorder" Property="BorderBrush" Value="Gray"></Setter>
                                                        <Setter TargetName="ArrowIcon" Property="Stroke" Value="Gray"></Setter>
                                                        <Setter TargetName="BackFromCreatingWindowBorder" Property="Cursor" Value="Hand"/>
                                                    </Trigger.Setters>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="true">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="BackFromCreatingWindowBorder" Property="Opacity" Value="0.75"></Setter>
                                                        <Setter TargetName="FieldOfButton" Property="Opacity" Value="0.75"/>
                                                    </Trigger.Setters>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>

                                <Grid Grid.Row="1" Grid.Column="0">
                                    
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="80"></RowDefinition>
                                        <RowDefinition Height="250"></RowDefinition>
                                        <RowDefinition Height="80"></RowDefinition>
                                        <RowDefinition Height="80"></RowDefinition>
                                        <RowDefinition Height="80"></RowDefinition>
                                        <RowDefinition Height="80"></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>

                                    <!-- Date of hiking begining -->
                                    <Label Grid.Row="0" Content="Пожалуйста, введите даты начала и окончания плвнируемого похода:" 
                                       FontSize="16" FontWeight="Bold" FontFamily="TimesnewFamily"
                                       Height="30" VerticalAlignment="Top"></Label>
                                    <Label Grid.Row="0" Content="С:" 
                                        VerticalContentAlignment="Top" HorizontalAlignment="Left" 
                                        Margin="20,25,0,0" Height="25" Width="25" 
                                        FontSize="14" FontWeight="Normal" FontFamily="TimesnewFamily"></Label>
                                    <DatePicker x:Name="DateFrom" Grid.Row="0" Margin="50,40,0,0"
                                        Width="200" Height="25"
                                        VerticalAlignment="Top" HorizontalAlignment="Left"></DatePicker>
                                    <Label Grid.Row="0" Content="По:" 
                                       VerticalContentAlignment="Top" HorizontalAlignment="Left" 
                                       Margin="260,25,0,0" Height="25" Width="30" 
                                       FontSize="14" FontWeight="Normal" FontFamily="TimesnewFamily"></Label>
                                    <DatePicker x:Name="DateTo" Grid.Row="0" Margin="300,40,0,0"
                                        Width="200" Height="25"
                                        VerticalAlignment="Top" HorizontalAlignment="Left"></DatePicker>

                                    <!-- Discription of your next trip -->
                                    <Label Grid.Row="1" Content="Пожалуйста, введите приветсвенное описание вашего мероприятия:" 
                                        FontSize="16" FontWeight="Bold" FontFamily="TimesnewFamily"
                                        Height="30" VerticalAlignment="Top"></Label>
                                    <TextBox x:Name="LittleDiscription" Grid.Row="1" Margin="0,35,0,0" 
                                         SpellCheck.IsEnabled="True" TextWrapping="Wrap" Height="200"
                                         FontSize="14" FontWeight="Normal" FontFamily="TimesnewFamily">
                                    </TextBox>

                                    <!-- Points of your trip -->
                                    <Label Grid.Row="2" Content="Пожалуйста, опишите маршрут вашего похода для потенциальных участников:" 
                                        FontSize="16" FontWeight="Bold" FontFamily="TimesnewFamily"
                                        Height="30" VerticalAlignment="Top"></Label>
                                    <TextBlock Grid.Row="2" Text="Точка старта маршрута:" TextWrapping="Wrap"
                                        VerticalAlignment="Top" HorizontalAlignment="Left" 
                                        Margin="0,35,0,0" Height="35" Width="150" 
                                        FontSize="14" FontWeight="Normal" FontFamily="TimesnewFamily"></TextBlock>
                                    <TextBox x:Name="PointFrom" Grid.Row="2" 
                                             VerticalAlignment="Top" HorizontalAlignment="Left" Margin="100,35,0,0"
                                             Width="300" Height="30"></TextBox>
                                    <TextBlock Grid.Row="2" Text="Точка окончания маршрута:" TextWrapping="Wrap"
                                        VerticalAlignment="Top" HorizontalAlignment="Left" 
                                        Margin="420,35,0,0" Height="35" Width="180" 
                                        FontSize="14" FontWeight="Normal" FontFamily="TimesnewFamily"></TextBlock>
                                    <TextBox x:Name="PointTo" Grid.Row="2" 
                                        VerticalAlignment="Top" HorizontalAlignment="Left" Margin="540,35,0,0"
                                        Width="300" Height="30"></TextBox>

                                    <!-- Discription of the location -->
                                    <Label Grid.Row="3" Content="Пожалуйста, опишити характер местности маршрута:"
                                           FontSize="16" FontWeight="Bold" FontFamily="TimesnewFamily"
                                           Height="30" VerticalAlignment="Top"></Label>
                                    <ComboBox Name="LocationMark" Grid.Row="3" Height="30" Width="300" 
                                              HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,30,0,0">
                                        <TextBlock Text="Лесная"></TextBlock>
                                        <TextBlock Text="Горная"></TextBlock>
                                        <TextBlock Text="Равнинная"></TextBlock>
                                        <TextBlock Text="Водная"></TextBlock>
                                        <TextBlock Text="Смешанная"></TextBlock>
                                    </ComboBox>

                                    <!-- Count of members -->
                                    <Label Grid.Row="4" Content="Введите ориентировочное количество участников группы:"
                                           FontSize="16" FontWeight="Bold" FontFamily="TimesnewFamily"
                                           Height="30" VerticalAlignment="Top"></Label>
                                    <TextBox Grid.Row="4" Height="30" Width="50" VerticalContentAlignment="Center" HorizontalContentAlignment="Center"
                                             HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,30,0,0"></TextBox>

                                    <!-- Level of hiking -->
                                    <Label Grid.Row="5" Content="Пожалуйста, укажите уровень сложности планируемого похода:" 
                                                FontSize="16" FontWeight="Bold" FontFamily="TimesnewFamily"
                                                Height="30" VerticalAlignment="Top"></Label>
                                    <ComboBox Name="LevelOfHiking" Grid.Row="5" Height="30" Width="300" 
                                              HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,30,0,0">
                                        <TextBlock Text="Very Hard"></TextBlock>
                                        <TextBlock Text="Hard"></TextBlock>
                                        <TextBlock Text="Medium"></TextBlock>
                                        <TextBlock Text="Easy"></TextBlock>
                                        <TextBlock Text="Very Easy"></TextBlock>
                                    </ComboBox>

                                    <!-- Save and accept button -->
                                    <Button x:Name="SaveAndContinue" Grid.Row="6" Content="Сохранить и отправить" 
                                            FontSize="16" FontWeight="Bold" FontFamily="TimesnewFamily"
                                            Width="300" Height="40"
                                            VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,15,15"
                                            Click="SaveAndContinue_Click">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border x:Name="SaveAndContinueButtonBorder" Background="AliceBlue" BorderBrush="Black" BorderThickness="1" CornerRadius="20"
                                                        Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
                                                    <ContentPresenter Content="{TemplateBinding Content}" VerticalAlignment="Center" HorizontalAlignment="Center"></ContentPresenter>
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Trigger.Setters>
                                                            <Setter TargetName="SaveAndContinueButtonBorder" Property="BorderBrush" Value="Gray"></Setter>
                                                            <Setter TargetName="SaveAndContinueButtonBorder" Property="Cursor" Value="Hand"/>
                                                        </Trigger.Setters>
                                                    </Trigger>
                                                    <Trigger Property="IsPressed" Value="true">
                                                        <Trigger.Setters>
                                                            <Setter TargetName="SaveAndContinueButtonBorder" Property="Opacity" Value="0.75"></Setter>
                                                            <Setter TargetName="SaveAndContinueButtonBorder" Property="Opacity" Value="0.75"/>
                                                        </Trigger.Setters>
                                                    </Trigger>
                                                    <!--<EventTrigger>
                                                        <EventTrigger.Actions>
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <DoubleAnimation Storyboard.TargetName="MainMenuPanel" 
                                                                                     Storyboard.TargetProperty="(Grid.Width)"
                                                                                     Duration="0:0:0:0.28"
                                                                                     From="0" To="320"/>
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </EventTrigger.Actions>
                                                    </EventTrigger>-->
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                    </Button>
                                    
                                </Grid>
                            
                            </Grid>
                        
                        </ScrollViewer>
                    </Border>
                    
                    <!--#endregion-->
                    
                    <!--#region Quit from creating new hiking process-->
                        
                        <Rectangle Grid.Column="0" Grid.ColumnSpan="2"
                                   Fill="Black" Opacity="0.75" 
                                   Visibility="{Binding Visibility, ElementName=CancelAprooving}"
                                   IsEnabled="{Binding IsEnabled, ElementName=CancelAprooving}"></Rectangle>
                        <Border x:Name="BorderOfCancelAproovingform" Grid.Column="0" Grid.ColumnSpan="2" CornerRadius="10"
                                Width="300" Height="200"
                                Visibility="Hidden" IsEnabled="False">
                            <Border.Background>
                                <SolidColorBrush Color="AliceBlue" Opacity="0.85"></SolidColorBrush>
                            </Border.Background>
                            <Grid x:Name="CancelAprooving" Margin="10"
                                  Visibility="{Binding Visibility, ElementName=BorderOfCancelAproovingform}"
                                  IsEnabled="{Binding IsEnabled, ElementName=BorderOfCancelAproovingform}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="50"></ColumnDefinition>
                                    <ColumnDefinition></ColumnDefinition>
                                    <ColumnDefinition Width="50"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition></RowDefinition>
                                    <RowDefinition Height="30"></RowDefinition>
                                </Grid.RowDefinitions>

                                <Button x:Name="ContinueButton" Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2"
                                        HorizontalAlignment="Left" VerticalAlignment="Center"
                                        Margin="2" Content="Продолжить"
                                        Width="100" Height="20" Click="ContinueButton_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="ButtonYesBorder" BorderBrush="Black" BorderThickness="2" CornerRadius="10"
                                                    VerticalAlignment="{TemplateBinding VerticalAlignment}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                                                    Width="{TemplateBinding Width}" Height="{TemplateBinding Height}"
                                                    Visibility="{Binding Visibility, ElementName=BorderOfCancelAproovingform}"
                                                    IsEnabled="{Binding IsEnabled, ElementName=BorderOfCancelAproovingform}">
                                                <ContentPresenter Content="{TemplateBinding Content}"
                                                                  VerticalAlignment="Center" HorizontalAlignment="Center"></ContentPresenter>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="ButtonYesBorder" Property="BorderBrush" Value="Gray"></Setter>
                                                        <Setter TargetName="ButtonYesBorder" Property="Cursor" Value="Hand"/>
                                                    </Trigger.Setters>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="true">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="ButtonYesBorder" Property="Opacity" Value="0.75"></Setter>
                                                    </Trigger.Setters>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>

                                <Button x:Name="CancelButton" Grid.Column="1" Grid.Row="1" Grid.ColumnSpan="2" 
                                        Margin="2" Content="Отменить" Width="100" Height="20" 
                                        HorizontalAlignment="Right" VerticalAlignment="Center"
                                        Click="CancelButton_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border x:Name="ButtonContinueBorder" BorderBrush="Black" BorderThickness="2" CornerRadius="10"
                                                    VerticalAlignment="{TemplateBinding VerticalAlignment}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                                                    Width="{TemplateBinding Width}" Height="{TemplateBinding Height}"
                                                    Visibility="{Binding Visibility, ElementName=BorderOfCancelAproovingform}"
                                                    IsEnabled="{Binding IsEnabled, ElementName=BorderOfCancelAproovingform}">
                                                <ContentPresenter Content="{TemplateBinding Content}"
                                                                  VerticalAlignment="Center" HorizontalAlignment="Center"></ContentPresenter>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="ButtonContinueBorder" Property="BorderBrush" Value="Gray"></Setter>
                                                        <Setter TargetName="ButtonContinueBorder" Property="Cursor" Value="Hand"/>
                                                    </Trigger.Setters>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="true">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="ButtonContinueBorder" Property="Opacity" Value="0.75"></Setter>
                                                    </Trigger.Setters>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                </Button>

                                <TextBlock Grid.Row="0" Grid.Column="1" Margin="0,15,0,0"
                                           Height="120" Width="170" Text="Желаете прервать процесс создания заявки? Введенные данные будут утрачены"
                                           TextWrapping="Wrap"
                                           VerticalAlignment="Top" HorizontalAlignment="Stretch"
                                           FontSize="14" FontWeight="Bold"></TextBlock>
                            </Grid>
                        </Border>
                    <!--#endregion-->
                
                    <!--#region Massage about sucsessful saving end-->

                    <Grid x:Name="SavingSucssesfulMessage" Grid.ColumnSpan="2" IsEnabled="False" Visibility="Hidden">
                        
                        <Rectangle Width="450" Height="100" RadiusX="20" RadiusY="20">
                            <Rectangle.Fill>
                                <SolidColorBrush Color="Orange"/>
                            </Rectangle.Fill>
                        </Rectangle>
                        <Label Content="Запись сохранена!" Width="300" Height="60"
                               VerticalContentAlignment="Center" HorizontalContentAlignment="Center"
                               FontFamily="TimesNewRoman" FontSize="28" FontWeight="Bold" Foreground="Black"/>
                    
                    </Grid>
                    
                    <!--#endregion-->
                    
                </Grid>

                <!--#endregion-->

                <!--#region Prepering for Hikking Section-->

                <Grid x:Name="PreperingForHiking" 
                      Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3"
                      Visibility="Visible" IsEnabled="True">
                    
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60"></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                        <RowDefinition Height="45"></RowDefinition>
                    </Grid.RowDefinitions>

                    <Grid.Resources>
                        <Style x:Key="StyleForTabItem" TargetType="TabItem">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="TabItem">
                                        <Border x:Name="BorderOfTabItem" BorderBrush="Transparent" BorderThickness="0" CornerRadius="5,5,0,0"
                                                Height="30" Width="220">
                                            <Border.Background>
                                                <SolidColorBrush Color="White" Opacity="0.75"></SolidColorBrush>
                                            </Border.Background>
                                            <ContentPresenter 
                                                Width="210" Height="18"
                                                VerticalAlignment="Center" HorizontalAlignment="Center"
                                                Content ="{TemplateBinding Header}"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter TargetName="BorderOfTabItem" Property="Background">
                                                    <Setter.Value>
                                                        <SolidColorBrush Color="White" Opacity="1"/>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="False">
                                                <Setter TargetName="BorderOfTabItem" Property="Background">
                                                    <Setter.Value>
                                                        <SolidColorBrush Color="White" Opacity="0.75"/>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="FontSize" Value="14"></Setter>
                            <Setter Property="FontWeight" Value="Bold"></Setter>
                            <Setter Property="FontFamily" Value="TimesNewRoman"></Setter>
                        </Style>

                        <Style x:Key="StyleForTabControl" TargetType="TabControl">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type TabControl}">
                                        <Grid ClipToBounds="True" SnapsToDevicePixels="True" 
                                              KeyboardNavigation.TabNavigation="Local">

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Name="ColumnDefinition0" />
                                                <ColumnDefinition Width="0" Name="ColumnDefinition1" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" Name="RowDefinition0" />
                                                <RowDefinition Height="*" Name="RowDefinition1" />
                                            </Grid.RowDefinitions>

                                            <Border x:Name="HeaderBorder" Background="Transparent">

                                                <ItemsControl>
                                                    <TabPanel IsItemsHost="True"
                                                              Name="HeaderPanel" 
                                                              Panel.ZIndex="1" 
                                                              KeyboardNavigation.TabIndex="1"
                                                              Grid.Column="0" Grid.Row="0"/>
                                                </ItemsControl>

                                            </Border>

                                            <Grid Name="ContentPanel" 
                                                  KeyboardNavigation.TabIndex="2" 
                                                  KeyboardNavigation.TabNavigation="Local" 
                                                  KeyboardNavigation.DirectionalNavigation="Contained" 
                                                  Grid.Column="0" Grid.Row="1">

                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="129*"/>
                                                    <ColumnDefinition Width="811*"/>
                                                </Grid.ColumnDefinitions>

                                                <Border Background="White" CornerRadius="0,5,5,5" Grid.ColumnSpan="2">
                                                    <ContentPresenter Content="{TemplateBinding SelectedContent}" 
                                                                      ContentTemplate="{TemplateBinding SelectedContentTemplate}" 
                                                                      ContentStringFormat="{TemplateBinding SelectedContentStringFormat}" 
                                                                      ContentSource="SelectedContent" 
                                                                      Name="PART_SelectedContentHost" 
                                                                      Margin="2" 
                                                                      SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}"/>
                                                </Border>

                                            </Grid>
                                        </Grid>

                                        <ControlTemplate.Triggers>
                                            <Trigger Property="TabControl.TabStripPlacement" Value="Bottom">
                                                <Setter TargetName="HeaderPanel" Property="Grid.Row" Value="1" />
                                                <Setter TargetName="ContentPanel" Property="Grid.Row" Value="0" />
                                                <Setter TargetName="RowDefinition0" Property="RowDefinition.Height" Value="*" />
                                                <Setter TargetName="RowDefinition1" Property="RowDefinition.Height" Value="Auto" />
                                                <Setter TargetName="HeaderBorder" Property="FrameworkElement.Margin" Value="0,5,0,0" />
                                            </Trigger>
                                            <Trigger Property="TabControl.TabStripPlacement" Value="Left">
                                                <Setter TargetName="HeaderPanel" Property="Grid.Row" Value="0" />
                                                <Setter TargetName="ContentPanel" Property="Grid.Row" Value="0" />
                                                <Setter TargetName="HeaderPanel" Property="Grid.Column" Value="0" />
                                                <Setter TargetName="ContentPanel" Property="Grid.Column" Value="1" />
                                                <Setter TargetName="ColumnDefinition0" Property="ColumnDefinition.Width" Value="Auto" />
                                                <Setter TargetName="ColumnDefinition1" Property="ColumnDefinition.Width" Value="*" />
                                                <Setter TargetName="RowDefinition0" Property="RowDefinition.Height" Value="*" />
                                                <Setter TargetName="RowDefinition1" Property="RowDefinition.Height" Value="0" />
                                                <Setter TargetName="HeaderBorder" Property="FrameworkElement.Margin" Value="0,0,5,0" />
                                            </Trigger>
                                            <Trigger Property="TabControl.TabStripPlacement" Value="Right">
                                                <Setter TargetName="HeaderPanel" Property="Grid.Row" Value="0" />
                                                <Setter TargetName="ContentPanel" Property="Grid.Row" Value="0" />
                                                <Setter TargetName="HeaderPanel" Property="Grid.Column" Value="1" />
                                                <Setter TargetName="ContentPanel" Property="Grid.Column" Value="0" />
                                                <Setter TargetName="ColumnDefinition0" Property="ColumnDefinition.Width" Value="*" />
                                                <Setter TargetName="ColumnDefinition1" Property="ColumnDefinition.Width" Value="Auto" />
                                                <Setter TargetName="RowDefinition0" Property="RowDefinition.Height" Value="*" />
                                                <Setter TargetName="RowDefinition1" Property="RowDefinition.Height" Value="0" />
                                                <Setter TargetName="HeaderBorder" Property="FrameworkElement.Margin" Value="5,0,0,0" />
                                            </Trigger>
                                            <Trigger Property="UIElement.IsEnabled" Value="False">
                                                <Setter Property="TextElement.Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Grid.Resources>

                    <!-- Workplaces -->

                    <!-- #region Main info about hikings -->
                    <Grid x:Name="MainInfoAboutHiking" Grid.Column="1" Grid.RowSpan="2" 
                          IsEnabled="True" Visibility="Visible">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                        </Grid.ColumnDefinitions>

                        <ListBox x:Name="ActiveHikingList" Grid.Column="0" Grid.Row="1" Margin="5,0,0,5"
                                 IsEnabled="{Binding IsEnabled, ElementName=Background_of_window}" SelectionChanged="NewsList_SelectionChanged">
                            <ListBox.Background>
                                <SolidColorBrush Color="White" Opacity="0.25"></SolidColorBrush>
                            </ListBox.Background>
                            <ListBox.Template>
                                <ControlTemplate TargetType="{x:Type ListBox}">
                                    <Border Background="{TemplateBinding Background}" BorderBrush="Black" BorderThickness="0" CornerRadius="10,0,0,10">
                                        <ScrollViewer Margin="0" Focusable="{Binding Focusable, ElementName=Main_controls}">
                                            <ItemsControl>
                                                <StackPanel Margin="4" IsItemsHost="True" HorizontalAlignment="Center" VerticalAlignment="Center"></StackPanel>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Border>
                                </ControlTemplate>
                            </ListBox.Template>
                        </ListBox>

                        <RichTextBox x:Name="Discription_of_ActiveHikking" Grid.Column="1" Grid.Row="0" Margin="0,0,5,5"
                                     FontSize="14" FontWeight="Bold"
                                     IsEnabled="{Binding IsEnabled, ElementName=Background_of_window}">
                            <RichTextBox.Background>
                                <SolidColorBrush Color="White" Opacity="0.85"></SolidColorBrush>
                            </RichTextBox.Background>
                            <RichTextBox.Template>
                                <ControlTemplate TargetType="{x:Type RichTextBox}">
                                    <Border Background="{TemplateBinding Background}" CornerRadius="0,20,20,0">
                                        <ScrollViewer Margin="10" x:Name="PART_ContentHost"/>
                                    </Border>
                                </ControlTemplate>
                            </RichTextBox.Template>
                            <FlowDocument>
                                <Paragraph>
                                    <Run Text=""/>
                                </Paragraph>
                            </FlowDocument>
                        </RichTextBox>

                    </Grid>
                    <!--#endregion-->

                    <!-- #region Food info -->

                    <TabControl x:Name="TabControlOfFoodInfo" Grid.Column="1" Style="{StaticResource ResourceKey=StyleForTabControl}" Margin="5"
                                IsEnabled="False" Visibility="Hidden">

                        <TabItem Header="Расчет пищи" Style="{StaticResource ResourceKey=StyleForTabItem}">
                            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                                <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="5">

                                    <Grid.RowDefinitions>

                                        <RowDefinition></RowDefinition>

                                    </Grid.RowDefinitions>

                                    <DataGrid Grid.Row="0" x:Name="FoodTable" 
                                              AutoGenerateColumns="False"
                                              ItemsSource="{Binding Source={StaticResource food_cvsRecords}}"
                                              Background="Transparent"
                                              CanUserReorderColumns="False"
                                              CanUserAddRows="False">

                                        <DataGrid.Columns>

                                            <DataGridTextColumn Header="Наименование пищи" Binding="{Binding Path=FoodName}"></DataGridTextColumn>
                                            <DataGridTextColumn Header="Гр. на человека" Binding="{Binding Path=AmountPerPerson}"></DataGridTextColumn>
                                            <DataGridTextColumn Header="Гр. на Группу" Binding="{Binding Path=AmountPerGroup}"></DataGridTextColumn>
                                            <DataGridTextColumn Header="Комментарий" Binding="{Binding Path=Description}"></DataGridTextColumn>

                                        </DataGrid.Columns>

                                        <DataGrid.GroupStyle>

                                            <!-- Style for groups at top level. -->
                                            <GroupStyle>
                                                <GroupStyle.ContainerStyle>
                                                    <Style TargetType="{x:Type GroupItem}">
                                                        <Setter Property="Margin" Value="0,0,0,5"/>
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                                                    <Expander IsExpanded="True" Background="Coral" BorderBrush="Coral" Foreground="#FFEEEEEE" BorderThickness="1,1,1,5">
                                                                        <Expander.Header>
                                                                            <DockPanel>
                                                                                <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" Margin="5,0,0,0" Width="100"/>
                                                                                <TextBlock FontWeight="Bold" Text="{Binding Path=ItemCount}"/>
                                                                            </DockPanel>
                                                                        </Expander.Header>
                                                                        <Expander.Content>
                                                                            <ItemsPresenter>
                                                                            </ItemsPresenter>
                                                                        </Expander.Content>
                                                                    </Expander>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </GroupStyle.ContainerStyle>
                                            </GroupStyle>

                                            <!-- Style for groups under the top level. -->
                                            <GroupStyle>
                                                <GroupStyle.HeaderTemplate>
                                                    <DataTemplate>
                                                        <DockPanel Background="Wheat">
                                                            <TextBlock Text="{Binding Path=Name}" Foreground="Black" Margin="30,0,0,0" Width="100"/>
                                                            <TextBlock Text="{Binding Path=ItemCount}" Foreground="Black"/>
                                                        </DockPanel>
                                                    </DataTemplate>
                                                </GroupStyle.HeaderTemplate>
                                            </GroupStyle>
                                        </DataGrid.GroupStyle>

                                        <DataGrid.RowStyle>
                                            <Style TargetType="DataGridRow">
                                                <Setter Property="Foreground" Value="Black" />
                                            </Style>
                                        </DataGrid.RowStyle>

                                    </DataGrid>
                                </Grid>
                            </ScrollViewer>
                        </TabItem>

                        <TabItem Header="Распределение по участникам" Style="{StaticResource ResourceKey=StyleForTabItem}">

                            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                                <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="5">

                                    <Grid.RowDefinitions>

                                        <RowDefinition></RowDefinition>

                                    </Grid.RowDefinitions>

                                    <DataGrid Grid.Row="0" x:Name="FoodTablePerPerson" 
                                              AutoGenerateColumns="False"
                                              ItemsSource="{Binding Source={StaticResource cvsRecordsOfFoodTablePerPerson}}"
                                              Background="Transparent"
                                              CanUserReorderColumns="False"
                                              CanUserAddRows="False">

                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="Участник" Binding="{Binding Path=Person}"></DataGridTextColumn>
                                            <DataGridTextColumn Header="Пища" Binding="{Binding Path=Foodname}"></DataGridTextColumn>
                                            <DataGridTextColumn Header="грамм" Binding="{Binding Path=AmountPerPerson}"></DataGridTextColumn>
                                            <DataGridTextColumn Header="Комментарий" Binding="{Binding Path=Description}"></DataGridTextColumn>
                                        </DataGrid.Columns>

                                        <DataGrid.GroupStyle>

                                            <!-- Style for groups at top level. -->
                                            <GroupStyle>
                                                <GroupStyle.ContainerStyle>
                                                    <Style TargetType="{x:Type GroupItem}">
                                                        <Setter Property="Margin" Value="0,0,0,5"/>
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                                                    <Expander IsExpanded="True" Background="Coral" BorderBrush="Coral" Foreground="#FFEEEEEE" BorderThickness="1,1,1,5">
                                                                        <Expander.Header>
                                                                            <DockPanel>
                                                                                <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" Margin="5,0,0,0" Width="100"/>
                                                                                <TextBlock FontWeight="Bold" Text="{Binding Path=ItemCount}"/>
                                                                            </DockPanel>
                                                                        </Expander.Header>
                                                                        <Expander.Content>
                                                                            <ItemsPresenter>
                                                                            </ItemsPresenter>
                                                                        </Expander.Content>
                                                                    </Expander>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Style>
                                                </GroupStyle.ContainerStyle>
                                            </GroupStyle>

                                        </DataGrid.GroupStyle>

                                        <DataGrid.RowStyle>
                                            <Style TargetType="DataGridRow">
                                                <Setter Property="Foreground" Value="Black" />
                                            </Style>
                                        </DataGrid.RowStyle>

                                    </DataGrid>
                                </Grid>

                            </ScrollViewer>

                        </TabItem>
                        
                    </TabControl>

                    <!--#endregion-->

                    <!-- #region Equipment info -->

                    <TabControl x:Name="TabControlOfEquipmentInfo" Grid.Column="1" Style="{StaticResource ResourceKey=StyleForTabControl}" Margin="5"
                                IsEnabled="False" Visibility="Hidden">

                        <TabItem Header="Расчет инвентаря" Style="{StaticResource ResourceKey=StyleForTabItem}">

                            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">

                                <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Margin="5">

                                    <DataGrid Grid.Row="0" x:Name="EquipmentTable" 
                                              AutoGenerateColumns="False"
                                              ItemsSource="{Binding Source={StaticResource recordsOfEqipmentsTable_cvs}}"
                                              Background="Transparent"
                                              CanUserReorderColumns="False"
                                              CanUserAddRows="False">

                                        <DataGrid.Columns>
                                            <DataGridTextColumn Header="Владелец" Binding="{Binding Path=OwnerID}"></DataGridTextColumn>
                                            <DataGridTextColumn Header="Наименование вещи" Binding="{Binding Path=EquipmentName}"></DataGridTextColumn>
                                            <DataGridTextColumn Header="Количество" Binding="{Binding Path=CountOfEquipment}"></DataGridTextColumn>
                                            <DataGridTextColumn Header="Вес" Binding="{Binding Path=WightOfEquipment}"></DataGridTextColumn>
                                            <DataGridTextColumn Header="Описание" Binding="{Binding Path=EquipmentDescription}"></DataGridTextColumn>
                                        </DataGrid.Columns>

                                        <DataGrid.GroupStyle>

                                            <!-- Style for groups at top level. -->
                                            <GroupStyle>

                                                <GroupStyle.ContainerStyle>

                                                    <Style TargetType="{x:Type GroupItem}">

                                                        <Setter Property="Margin" Value="0,0,0,5"/>
                                                        <Setter Property="Template">
                                                            <Setter.Value>
                                                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                                                    <Expander IsExpanded="True" Background="Coral" BorderBrush="Coral" Foreground="#FFEEEEEE" BorderThickness="1,1,1,5">
                                                                        <Expander.Header>
                                                                            <DockPanel>
                                                                                <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" Margin="5,0,0,0" Width="100"/>
                                                                                <TextBlock FontWeight="Bold" Text="{Binding Path=ItemCount}"/>
                                                                            </DockPanel>
                                                                        </Expander.Header>
                                                                        <Expander.Content>
                                                                            <ItemsPresenter>
                                                                            </ItemsPresenter>
                                                                        </Expander.Content>
                                                                    </Expander>
                                                                </ControlTemplate>
                                                            </Setter.Value>
                                                        </Setter>

                                                    </Style>

                                                </GroupStyle.ContainerStyle>

                                            </GroupStyle>

                                        </DataGrid.GroupStyle>

                                        <DataGrid.RowStyle>
                                            <Style TargetType="DataGridRow">
                                                <Setter Property="Foreground" Value="Black" />
                                            </Style>
                                        </DataGrid.RowStyle>

                                    </DataGrid>

                                </Grid>

                            </ScrollViewer>

                        </TabItem>

                    </TabControl>

                    <!--#endregion-->

                    <!-- #region Instrumental grid -->

                    <Grid x:Name="Instruments" Grid.Column="0" Grid.Row="0">
                        
                        <Grid.RowDefinitions>
                            <RowDefinition Height="60"></RowDefinition>
                            <RowDefinition Height="60"></RowDefinition>
                            <RowDefinition Height="60"></RowDefinition>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>

                        <Grid.Resources>
                            <Style x:Key="StyleOfInstrument_ToggleButton">
                                <Setter Property="ToggleButton.Background">
                                    <Setter.Value>
                                        <SolidColorBrush Color="White" Opacity="0.55"></SolidColorBrush>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="ToggleButton.FontSize" Value="14"></Setter>
                                <Setter Property="ToggleButton.FontStyle" Value="Normal"></Setter>
                                <Setter Property="ToggleButton.FontWeight" Value="Bold"></Setter>
                                <Setter Property="ToggleButton.FontFamily" Value="TimesNewRoman"></Setter>
                                <Setter Property="ToggleButton.VerticalAlignment" Value="Center"></Setter>
                                <Setter Property="ToggleButton.HorizontalAlignment" Value="Center"></Setter>
                                <Setter Property="ToggleButton.Margin" Value="2"></Setter>
                                <Setter Property="ToggleButton.Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ToggleButton">
                                            <Border x:Name="BorderOfInstrument_ToggleButton" 
                                                    CornerRadius="10" BorderThickness="0" Background="{TemplateBinding Background}">
                                                <ContentPresenter Content="{TemplateBinding Content}"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="BorderOfInstrument_ToggleButton" Property="Cursor" Value="Hand"/>
                                                    </Trigger.Setters>
                                                </Trigger>
                                                <Trigger Property="IsPressed" Value="true">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="BorderOfInstrument_ToggleButton" Property="Opacity" Value="0.75"></Setter>
                                                    </Trigger.Setters>
                                                </Trigger>
                                                <Trigger Property="IsChecked" Value="True">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="BorderOfInstrument_ToggleButton" Property="Background">
                                                            <Setter.Value>
                                                                <SolidColorBrush Color="White" Opacity="1"></SolidColorBrush>
                                                            </Setter.Value>
                                                        </Setter>
                                                    </Trigger.Setters>
                                                </Trigger>
                                                <Trigger Property="IsChecked" Value="False">
                                                    <Trigger.Setters>
                                                        <Setter TargetName="BorderOfInstrument_ToggleButton" Property="Background" Value="White"></Setter>
                                                        <Setter TargetName="BorderOfInstrument_ToggleButton" Property="Opacity" Value="0.55"></Setter>
                                                    </Trigger.Setters>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Grid.Resources>

                        <ToggleButton x:Name="Food_ToggleButton" Style="{StaticResource ResourceKey=StyleOfInstrument_ToggleButton}"
                                      Grid.Row="1" Checked="Food_ToggleButton_Checked" Unchecked="Food_ToggleButton_Unchecked">
                            <ToggleButton.Content>
                                
                                <Grid Width="50" Height="50">
                                    
                                    <Grid Margin="1,0,0,0">
                                        <Rectangle Width="2" Height="25" Margin="2,0,0,5" Fill="Black" 
                                                   RadiusY="5" RadiusX="5"
                                                   VerticalAlignment="Bottom" HorizontalAlignment="Left"></Rectangle>
                                        <Ellipse Height="12" Width="6" Margin="0,12,0,0" Fill="Black"  
                                                 VerticalAlignment="Top" HorizontalAlignment="Left"></Ellipse>
                                    </Grid>

                                    <Grid Margin="0,0,1,0">
                                        <Rectangle Width="2" Height="25" Margin="0,0,2,5" Fill="Black" 
                                                   RadiusY="5" RadiusX="5"
                                                   VerticalAlignment="Bottom" HorizontalAlignment="Right"></Rectangle>
                                        <Ellipse Height="20" Width="4" Margin="0,10,1,0" Fill="Black"  
                                                 VerticalAlignment="Top" HorizontalAlignment="Right"></Ellipse>
                                    </Grid>

                                    <Grid>
                                        <Ellipse Stroke="Black" StrokeThickness="2" Width="35" Height="35"></Ellipse>
                                        <Ellipse Stroke="Black" StrokeThickness="1" Width="25" Height="25"></Ellipse>
                                    </Grid>
                                    
                                </Grid>
                            
                            </ToggleButton.Content>
                        </ToggleButton>

                        <ToggleButton x:Name="Equipment" Style="{StaticResource ResourceKey=StyleOfInstrument_ToggleButton}"
                                      Grid.Row="2" Checked="Equipment_Checked" Unchecked="Equipment_Unchecked">
                            <ToggleButton.Content>

                                <Grid Width="50" Height="50">
                                    <Border Width="40" Height="40" CornerRadius="10" BorderThickness="1,6,1,1" BorderBrush="Black"></Border>
                                    <Border Width="38" Height="10" CornerRadius="5" BorderThickness="1,0,1,1" BorderBrush="Black" Margin="0,12,0,0" VerticalAlignment="Top"></Border>
                                    <Path Stroke="Black" StrokeThickness="5" StrokeEndLineCap="Triangle">
                                        <Path.Data>
                                            <PathGeometry>
                                                <PathFigure StartPoint="13,21.5" IsFilled="False" IsClosed="False">
                                                    <LineSegment Point="13,32"></LineSegment>
                                                </PathFigure>
                                                <PathFigure StartPoint="37,21.5">
                                                    <LineSegment Point="37,32"></LineSegment>
                                                </PathFigure>
                                            </PathGeometry>
                                        </Path.Data>
                                    </Path>
                                </Grid>

                            </ToggleButton.Content>
                        </ToggleButton>

                        <ToggleButton x:Name="HikingInfo" Style="{StaticResource ResourceKey=StyleOfInstrument_ToggleButton}"
                                      Grid.Row="0" Checked="HikingInfo_Checked" Unchecked="HikingInfo_Unchecked">
                            <ToggleButton.Content>
                                
                                <Grid Width="50" Height="50">
                                    <Rectangle Width="6" Height="28" Stroke="Transparent" Fill="Black"
                                                   VerticalAlignment="Bottom" HorizontalAlignment="Center" Margin="0,0,0,5"
                                                   RadiusX="3" RadiusY="3"/>
                                    <Ellipse Width="6" Height="6" Fill="Black"
                                             VerticalAlignment="Top" HorizontalAlignment="Center" Margin="0,10,0,0"/>
                                </Grid>
                            
                            </ToggleButton.Content>
                        </ToggleButton>
                    </Grid>

                    <!--#endregion-->

                    <!--#region "Add new record" buttons -->
                    
                    <!--#region add new record for food table -->
                    <Button x:Name="AddNewRecordInFoodTable" Grid.Column="1" Grid.Row="1"
                            FontFamily="TimesNewRoman" FontSize="18" FontStyle="Normal" FontWeight="Bold"
                            Click="AddNewRecordInFoodTable_Click" IsEnabled="False" Visibility="Hidden">
                        <Button.Template>

                            <ControlTemplate TargetType="Button">

                                <Border x:Name="AddNewRecordInFoodTable_button_border" BorderThickness="3" BorderBrush="Black"
                                            HorizontalAlignment="Right" VerticalAlignment="Center" Width="370" Height="42" CornerRadius="10"
                                            Margin="0,0,10,0">

                                    <Border.Background>
                                        <SolidColorBrush Color="White" Opacity="0.75"></SolidColorBrush>
                                    </Border.Background>

                                    <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center"
                                                      Content="Добавить запись">
                                    </ContentPresenter>

                                </Border>

                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="AddNewRecordInFoodTable_button_border" Property="Background">
                                            <Setter.Value>
                                                <SolidColorBrush Color="White" Opacity="0.85"></SolidColorBrush>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="AddNewRecordInFoodTable_button_border" Property="Background">
                                            <Setter.Value>
                                                <SolidColorBrush Color="Gray" Opacity="0.75"></SolidColorBrush>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </ControlTemplate.Triggers>

                            </ControlTemplate>

                        </Button.Template>
                    </Button>
                    <!--#endregion-->
                    
                    <!--#region add new record for equipment table -->
                    <Button x:Name="AddNewRecordInEquipmentTable" Grid.Column="1" Grid.Row="1"
                            FontFamily="TimesNewRoman" FontSize="18" FontStyle="Normal" FontWeight="Bold"
                            Click="AddNewRecordInEquipmentTable_Click" IsEnabled="False" Visibility="Hidden">
                        <Button.Template>

                            <ControlTemplate TargetType="Button">

                                <Border x:Name="AddNewRecordInEquipmentTable_button_border" BorderThickness="3" BorderBrush="Black"
                                        HorizontalAlignment="Right" VerticalAlignment="Center" Width="370" Height="42" CornerRadius="10"
                                        Margin="0,0,10,0">

                                    <Border.Background>
                                        <SolidColorBrush Color="White" Opacity="0.75"></SolidColorBrush>
                                    </Border.Background>

                                    <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center"
                                                      Content="Добавить запись">
                                    </ContentPresenter>

                                </Border>

                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="AddNewRecordInEquipmentTable_button_border" Property="Background">
                                            <Setter.Value>
                                                <SolidColorBrush Color="White" Opacity="0.85"></SolidColorBrush>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="AddNewRecordInEquipmentTable_button_border" Property="Background">
                                            <Setter.Value>
                                                <SolidColorBrush Color="Gray" Opacity="0.75"></SolidColorBrush>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </ControlTemplate.Triggers>

                            </ControlTemplate>

                        </Button.Template>
                    </Button>
                    <!--#endregion-->

                    <!--#endregion-->

                </Grid>
                
                <!--#region "Add new record" forms -->

                <Grid x:Name="CreateNewRecord_grid" Grid.ColumnSpan="3" Grid.RowSpan="3" IsEnabled="True" Visibility="Hidden">

                    <Grid.Resources>
                        
                        <Style x:Key="StyleForBackButton" TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="BackButtonFromCreatingForm_border" 
                                                Background="Transparent" BorderThickness="0" CornerRadius="25" Margin="5"
                                                Height="{TemplateBinding Height}" Width="{TemplateBinding Width}">

                                            <Grid x:Name="FieldOfBackButtonFromCreatingForm">
                                                <Path x:Name="ArrowIcon_BackButton" Stroke="Black" StrokeThickness="3">
                                                    <Path.Data>
                                                        <PathGeometry>

                                                            <PathFigure StartPoint="10,24" IsClosed="False">
                                                                <LineSegment Point="40,24"></LineSegment>
                                                            </PathFigure>

                                                            <PathFigure StartPoint="25,12" IsClosed="False">
                                                                <LineSegment Point="40,24"></LineSegment>
                                                                <LineSegment Point="25,36"></LineSegment>
                                                            </PathFigure>

                                                        </PathGeometry>
                                                    </Path.Data>
                                                </Path>
                                            </Grid>

                                        </Border>

                                        <ControlTemplate.Triggers>

                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Trigger.Setters>
                                                    <Setter TargetName="BackButtonFromCreatingForm_border" Property="BorderBrush" Value="Gray"></Setter>
                                                    <Setter TargetName="ArrowIcon_BackButton" Property="Stroke" Value="DarkGray"></Setter>
                                                    <Setter TargetName="BackButtonFromCreatingForm_border" Property="Cursor" Value="Hand"/>
                                                </Trigger.Setters>
                                            </Trigger>

                                            <Trigger Property="IsPressed" Value="true">
                                                <Trigger.Setters>
                                                    <Setter TargetName="BackButtonFromCreatingForm_border" Property="Opacity" Value="0.75"></Setter>
                                                    <Setter TargetName="FieldOfBackButtonFromCreatingForm" Property="Opacity" Value="0.75"/>
                                                </Trigger.Setters>
                                            </Trigger>

                                        </ControlTemplate.Triggers>

                                    </ControlTemplate>

                                </Setter.Value>
                            </Setter>
                        </Style>
                        
                        <Style x:Key="StyleForListInFillingForms" TargetType="ListBox">
                            
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type ListBox}">

                                        <Border Background="{TemplateBinding Background}" BorderThickness="0" CornerRadius="10,0,0,10">

                                            <ScrollViewer Margin="0" Focusable="{Binding Focusable, ElementName=Main_controls}">

                                                <ItemsControl>

                                                    <StackPanel Margin="4" IsItemsHost="True" HorizontalAlignment="Center" VerticalAlignment="Center"></StackPanel>

                                                </ItemsControl>

                                            </ScrollViewer>

                                        </Border>

                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>

                            <Setter Property="Background">
                                <Setter.Value>
                                    <SolidColorBrush Color="Orange" Opacity="0.75"/>
                                </Setter.Value>
                            </Setter>
                            
                        </Style>

                        <Style x:Key="StyleForAddNewRecordInListButton" TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">

                                        <Border x:Name="AddNewOwner_border" CornerRadius="0,0,0,10">
                                            <Border.Background>
                                                <SolidColorBrush Color="White" Opacity="0.95"></SolidColorBrush>
                                            </Border.Background>
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"
                                                          Content="{TemplateBinding Content}"></ContentPresenter>
                                        </Border>

                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="true">
                                                <Setter TargetName="AddNewOwner_border" Property="Background">
                                                    <Setter.Value>
                                                        <SolidColorBrush Color="White" Opacity="0.75"/>
                                                    </Setter.Value>
                                                </Setter>
                                                <Setter TargetName="AddNewOwner_border" Property="Cursor" Value="Hand"></Setter>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="true">
                                                <Setter TargetName="AddNewOwner_border" Property="Background">
                                                    <Setter.Value>
                                                        <SolidColorBrush Color="DarkGray" Opacity="0.5"/>
                                                    </Setter.Value>
                                                </Setter>
                                            </Trigger>
                                        </ControlTemplate.Triggers>

                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>

                        <Style x:Key="ButtonOnFillingFormStyle" TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">

                                        <Border x:Name="AddRowButton_border" Margin="10,0,10,0" CornerRadius="10" BorderThickness="1" BorderBrush="Black" Width="160" Height="30"
                                                        HorizontalAlignment="Left" VerticalAlignment="Center">
                                            <Border.Background>
                                                <SolidColorBrush Color="White" Opacity="0.85"></SolidColorBrush>
                                            </Border.Background>
                                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center"
                                                                      Content="{TemplateBinding Content}">
                                            </ContentPresenter>
                                        </Border>

                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Trigger.Setters>
                                                    <Setter TargetName="AddRowButton_border" Property="BorderBrush" Value="Gray"></Setter>
                                                    <!--<Setter TargetName="AddRowButton_border" Property="Foreground" Value="DarkGray"></Setter>-->
                                                    <Setter TargetName="AddRowButton_border" Property="Cursor" Value="Hand"/>
                                                </Trigger.Setters>
                                            </Trigger>

                                            <Trigger Property="IsPressed" Value="true">
                                                <Trigger.Setters>
                                                    <Setter TargetName="AddRowButton_border" Property="Opacity" Value="0.75"></Setter>
                                                    <Setter TargetName="AddRowButton_border" Property="Opacity" Value="0.75"/>
                                                </Trigger.Setters>
                                            </Trigger>
                                        </ControlTemplate.Triggers>

                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="FontSize" Value="16"></Setter>
                            <Setter Property="FontWeight" Value="Bold"></Setter>
                            <Setter Property="HorizontalContentAlignment" Value="Center"></Setter>
                            <Setter Property="VerticalContentAlignment" Value="Center"></Setter>
                        </Style>

                    </Grid.Resources>
                    
                    <!--Control Bacground-->
                    <Rectangle Grid.ColumnSpan="2" Grid.RowSpan="2">
                        
                        <Rectangle.Fill>
                            
                            <SolidColorBrush Color="Black" Opacity="0.97"></SolidColorBrush>
                        
                        </Rectangle.Fill>
                    
                    </Rectangle>
                    
                    <!--#region FormForFoodTableFilling-->

                    <Grid x:Name="AddNewRecordForFoodTable" Visibility="Hidden" IsEnabled="False">

                        <Grid.ColumnDefinitions>

                            <ColumnDefinition Width="360"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>

                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                            <RowDefinition Height="60"></RowDefinition>
                        </Grid.RowDefinitions>

                        <ListBox x:Name="DaysList" Grid.RowSpan="2" Margin="15,15,0,15"
                                 Style="{StaticResource StyleForListInFillingForms}" SelectionMode="Single" SelectionChanged="DaysList_SelectionChanged"/>

                        <!--<Button x:Name="AddNewDay" Grid.Row="1" Content="Добавить информацию по дням" Margin="15,0,0,15"
                                FontSize="16" FontWeight="Bold" FontFamily="TimesNewRomans" Style="{StaticResource StyleForAddNewRecordInListButton}"/>-->
                        
                        <Border x:Name="FoodDataFillingForm" Grid.Column="1" Grid.RowSpan="2" CornerRadius="0,10,10,0" 
                                BorderThickness="0" Margin="0,15,15,15">

                            <Border.Background>
                                <SolidColorBrush Color="White" Opacity="0.85"></SolidColorBrush>
                            </Border.Background>

                            <Grid>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="60"></RowDefinition>
                                    <RowDefinition></RowDefinition>
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition></ColumnDefinition>
                                    <ColumnDefinition Width="60"></ColumnDefinition>
                                </Grid.ColumnDefinitions>

                                <Button Grid.Column="1" Grid.Row="0" Style="{StaticResource ResourceKey=StyleForBackButton}"
                                        Click="BackFromFiilingButton_Click"/>

                                <ScrollViewer Grid.ColumnSpan="2" Grid.Row="1"
                                              HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                    <Grid x:Name="FillingPlace_Food">
                                        <Grid.RowDefinitions>
                                            <RowDefinition></RowDefinition>
                                            <RowDefinition Height="40"></RowDefinition>
                                        </Grid.RowDefinitions>

                                        <DataGrid x:Name="DataGridForFillingFoodData" 
                                                  AutoGenerateColumns="False"
                                                  Background="White"
                                                  CanUserReorderColumns="False"
                                                  CanUserAddRows="True" Margin="5">

                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Время периема пищи" Width="150" Binding="{Binding Path=Col1}"></DataGridTextColumn>
                                                <DataGridTextColumn Header="Участник" Width="150" Binding="{Binding Path=Col1}"></DataGridTextColumn>
                                                <DataGridTextColumn Header="Наименование еды" Width="150" Binding="{Binding Path=Col1}"></DataGridTextColumn>
                                                <DataGridTextColumn Header="Грамм" Width="100" Binding="{Binding Path=Col1}"></DataGridTextColumn>
                                            </DataGrid.Columns>

                                        </DataGrid>

                                        <Button x:Name="AddNewRowForFillingFoodData_DataGrid" Grid.Row="1" Style="{StaticResource ResourceKey=ButtonOnFillingFormStyle}"
                                                Content="Добавить запись" Click="AddNewRowForFillingFoodData_DataGrid_Click"/>

                                        <Button x:Name="RemoveRowFromFoodData" Grid.Row="1" Style="{StaticResource ButtonOnFillingFormStyle}" 
                                                Margin="165,0,0,0" Content="Удалить запись" Click="RemoveRowFromFoodData_Click"/>

                                        <Button x:Name="SaveChangesOfFoodData" Grid.Row="1" Style="{StaticResource ButtonOnFillingFormStyle}"
                                                HorizontalAlignment="Right" Content="Сохранить" Click="SaveChangesOfFoodData_Click"/>

                                    </Grid>
                                </ScrollViewer>

                            </Grid>

                        </Border>
                    </Grid>

                    <!--#endregion-->

                    <!--#region FormForEquipmentTableFilling -->
                    
                    <Grid x:Name="AddNewRecordForEquipmentTable" Visibility="Visible" IsEnabled="True">
                        
                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                            <RowDefinition Height="60"></RowDefinition>
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="360"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        
                        <ListBox x:Name="EquipmentOwnersList" Grid.RowSpan="2" Margin="15,15,0,15"
                                 Style="{StaticResource StyleForListInFillingForms}"/>

                        <!--<Button x:Name="AddNewOwner" Grid.Row="1" Content="Добавить информацию по участникам" Margin="15,0,0,15"
                                FontSize="16" FontWeight="Bold" FontFamily="TimesNewRomans" Style="{StaticResource StyleForAddNewRecordInListButton}"/>-->
                    
                        <Border x:Name="EquipmentDataFillingForm" Grid.Column="1" Grid.RowSpan="2" 
                                CornerRadius="0,10,10,0" BorderThickness="0" Margin="0,15,15,15">
                        
                            <Border.Background>
                                <SolidColorBrush Color="White" Opacity="0.85"></SolidColorBrush>
                            </Border.Background>

                            <Grid>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="60"></RowDefinition>
                                    <RowDefinition></RowDefinition>
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition></ColumnDefinition>
                                    <ColumnDefinition Width="60"></ColumnDefinition>
                                </Grid.ColumnDefinitions>

                                <Button Grid.Column="1" Grid.Row="0" Style="{StaticResource ResourceKey=StyleForBackButton}"
                                        Click="BackFromFiilingButton_Click"/>
                                
                                <ScrollViewer Grid.ColumnSpan="2" Grid.Row="1" Margin="5">
                                    
                                    <Grid x:Name="FillingPlace_Equipment">

                                        <Grid.RowDefinitions>
                                            <RowDefinition></RowDefinition>
                                            <RowDefinition Height="40"></RowDefinition>
                                        </Grid.RowDefinitions>

                                        <DataGrid x:Name="DataGridForFillingEquipmentData" 
                                                  AutoGenerateColumns="False"
                                                  Background="White"
                                                  CanUserReorderColumns="False"
                                                  CanUserAddRows="True" Margin="5">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn Header="Наименование вещи" Width="150" Binding="{Binding Path=Col1}"></DataGridTextColumn>
                                                <DataGridTextColumn Header="Количество" Width="150" Binding="{Binding Path=Col1}"></DataGridTextColumn>
                                                <DataGridTextColumn Header="Вес/шт." Width="150" Binding="{Binding Path=Col1}"></DataGridTextColumn>
                                            </DataGrid.Columns>
                                        </DataGrid>

                                        <Button x:Name="AddNewRowForFillingEquipmentData" Grid.Row="1" Style="{StaticResource ResourceKey=ButtonOnFillingFormStyle}"
                                                Content="Добавить запись" Click="AddNewRowForFillingEquipmentData_DataGrid_Click"/>

                                        <Button x:Name="RemoveRowFromEquipmentData" Grid.Row="1" Style="{StaticResource ButtonOnFillingFormStyle}" 
                                                Margin="165,0,0,0" Content="Удалить запись" Click="RemoveRowFromEquipmentData_Click"/>

                                        <Button x:Name="SaveChangesOfEquipmentData" Grid.Row="1" Style="{StaticResource ButtonOnFillingFormStyle}"
                                                HorizontalAlignment="Right" Content="Сохранить" Click="SaveChangesOfEquipmentData_Click"/>
                                        
                                    </Grid>
                                    
                                </ScrollViewer>
                                
                            </Grid>
                        
                        </Border>
                    
                    </Grid>


                    <!--#endregion-->
                    
                </Grid>

                <!--#endregion-->

                <!--#endregion-->

                <!--#region Settings Section -->

                <Grid x:Name="Settings" Grid.RowSpan="2" Grid.ColumnSpan="3" 
                      Visibility="Hidden" Focusable="False">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition Width="500"></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <Grid.RowDefinitions>
                        <RowDefinition Height="60"></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition Height="60"></RowDefinition>
                    </Grid.RowDefinitions>
                    
                    <Rectangle Grid.ColumnSpan="3" Grid.RowSpan="3">
                        <Rectangle.Fill>
                            <SolidColorBrush Color="Black" Opacity="0.6"/>
                        </Rectangle.Fill>
                    </Rectangle>

                    <Border x:Name="SettingForm" Grid.Column="1" Grid.Row="1" 
                            BorderThickness="0" CornerRadius="20"> 
                        <Border.Background>
                            <SolidColorBrush Color="Orange"></SolidColorBrush>
                        </Border.Background>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="60"></RowDefinition>
                                <RowDefinition></RowDefinition>
                            </Grid.RowDefinitions>

                            <ScrollViewer Grid.Row="1" Margin="7">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="110"></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>

                                    <Image Grid.Row="0" Grid.Column="0" x:Name="AvavtarImage_Setting"
                                           HorizontalAlignment="Center" VerticalAlignment="Center" 
                                           Height="100" Width="100" >
                                        <Image.Source>
                                            <DrawingImage>
                                                <DrawingImage.Drawing>
                                                    <GeometryDrawing>
                                                        <GeometryDrawing.Pen>
                                                            <Pen Brush="AliceBlue" Thickness="1"></Pen>
                                                        </GeometryDrawing.Pen>
                                                        <GeometryDrawing.Geometry>
                                                            <EllipseGeometry RadiusX="100" RadiusY="100"></EllipseGeometry>
                                                        </GeometryDrawing.Geometry>
                                                        <GeometryDrawing.Brush>
                                                            <ImageBrush>
                                                                <ImageBrush.ImageSource>
                                                                    <BitmapImage UriSource="Resources/Images/images.jpg">
                                                                    </BitmapImage>
                                                                </ImageBrush.ImageSource>
                                                            </ImageBrush>
                                                        </GeometryDrawing.Brush>
                                                    </GeometryDrawing>
                                                </DrawingImage.Drawing>
                                            </DrawingImage>
                                        </Image.Source>
                                    </Image>

                                </Grid>
                            </ScrollViewer>
                            
                        </Grid>
                    </Border>
                    

                </Grid>

                <!--#endregion-->

                <!--#region Menu Background Button -->
                <Button x:Name="MenuBackground" 
                        Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3" Grid.RowSpan="2"
                        Visibility="Hidden" Focusable="False" Click="MenuBackgroundButton_Click">
                    <Button.Template>
                        <ControlTemplate>
                            <Border BorderThickness="0" Background="Black" Opacity="0.75"></Border>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                <!--#endregion-->

                <!--#region Menu -->

                <Grid Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Grid.RowSpan="2" 
                        Width="0" HorizontalAlignment="Left"
                        Background="#1b1a1c" Opacity="1" Visibility="Hidden" Focusable="False"
                        x:Name="MainMenuPanel">

                    <Grid.RowDefinitions>
                        <RowDefinition Height="140"></RowDefinition>
                        <RowDefinition Height="70"></RowDefinition>
                        <RowDefinition Height="70"></RowDefinition>
                        <RowDefinition Height="70"></RowDefinition>
                        <RowDefinition Height="70"></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>

                    <Grid.Resources>
                        <Style x:Key="MenuListButtonStyle">
                            <Setter Property="Control.Background" Value="#0000"></Setter>
                            <Setter Property="Control.Foreground" Value="AliceBlue"></Setter>
                            <Setter Property="Control.Width" Value="280"></Setter>
                            <Setter Property="Control.Height" Value="60"></Setter>
                            <Setter Property="Control.VerticalAlignment" Value="Center"></Setter>
                            <Setter Property="Control.HorizontalAlignment" Value="Center"></Setter>
                            <Setter Property="Control.VerticalContentAlignment" Value="Center"></Setter>
                            <Setter Property="Control.HorizontalContentAlignment" Value="Center"></Setter>
                            <Setter Property="Control.Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="{x:Type Button}">
                                        <Border BorderThickness="0">
                                            <ContentPresenter Content="{TemplateBinding Content}"
                                                  VerticalAlignment="Center" HorizontalAlignment="Left" Margin="15"></ContentPresenter>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Trigger.Setters>
                                                    <Setter Property="Cursor" Value="Hand"/>
                                                </Trigger.Setters>
                                            </Trigger>
                                            <Trigger Property="IsPressed" Value="true">
                                                <Trigger.Setters>
                                                    <Setter Property="Opacity" Value="0.75"></Setter>
                                                </Trigger.Setters>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="Control.FontSize" Value="18"></Setter>
                            <Setter Property="Control.FontStyle" Value="Normal"></Setter>
                            <Setter Property="Control.FontWeight" Value="Bold"></Setter>
                            <Setter Property="Control.FontFamily" Value="Sans Serif"></Setter>
                        </Style>
                    </Grid.Resources>


                    <Grid Grid.Row="0" Grid.Column="0" Background="Orange">

                        <Grid.RowDefinitions>
                            <RowDefinition Height="105"></RowDefinition>
                            <RowDefinition Height="5"></RowDefinition>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="35"></ColumnDefinition>
                            <ColumnDefinition Width="55"></ColumnDefinition>
                            <ColumnDefinition Width="15"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                        </Grid.ColumnDefinitions>

                        <Grid.Resources>
                            <ControlTemplate x:Key="TemplateForTextBox" TargetType="TextBox">
                                <Border BorderThickness="0">
                                    <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Left" Margin="5,0,5,0"
                                              Content="{TemplateBinding Text}"></ContentPresenter>
                                </Border>
                            </ControlTemplate>
                        </Grid.Resources>

                        <!-- Avatar Photo -->
                        <Image Grid.Row="0" Grid.Column="0" x:Name="AvavtarImage" Grid.ColumnSpan="4" Grid.RowSpan="3"
                               HorizontalAlignment="Left" VerticalAlignment="Top" Margin="15,5,0,0"
                               Height="100" Width="100" >
                            <Image.Source>
                                <DrawingImage>
                                    <DrawingImage.Drawing>
                                        <GeometryDrawing>
                                            <GeometryDrawing.Pen>
                                                <Pen Brush="AliceBlue" Thickness="1"></Pen>
                                            </GeometryDrawing.Pen>
                                            <GeometryDrawing.Geometry>
                                                <EllipseGeometry RadiusX="100" RadiusY="100"></EllipseGeometry>
                                            </GeometryDrawing.Geometry>
                                            <GeometryDrawing.Brush>
                                                <ImageBrush>
                                                    <ImageBrush.ImageSource>
                                                        <BitmapImage UriSource="Resources/Images/images.jpg">
                                                        </BitmapImage>
                                                    </ImageBrush.ImageSource>
                                                </ImageBrush>
                                            </GeometryDrawing.Brush>
                                        </GeometryDrawing>
                                    </DrawingImage.Drawing>
                                </DrawingImage>
                            </Image.Source>
                        </Image>

                        <!-- SelfPresenter Box -->
                        <TextBox x:Name ="FullNamePresentation" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="4" Grid.RowSpan="3"
                                    Width="185" Height="80"
                                    VerticalAlignment="Top" HorizontalAlignment="Left" Margin="120,15,0,0"
                                    Background="{x:Null}" Foreground="#1b1a1c" 
                                    FontSize="18" FontFamily="TimesNewRoman" FontWeight="Bold"
                                    Text="Абдуллова Гульназ">
                            <TextBox.Template>
                                <ControlTemplate TargetType="TextBox">
                                    <Border BorderThickness="0">
                                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Left" Margin="5,0,5,0"
                                              Content="{TemplateBinding Text}"></ContentPresenter>
                                    </Border>
                                </ControlTemplate>
                            </TextBox.Template>
                        </TextBox>

                        <!-- Status presenter-->
                        <TextBox x:Name="ClientStatus" Grid.Column="1" Grid.Row="1" Grid.RowSpan="2"
                            FontSize="14" FontFamily="Sans serif" FontWeight="Bold"
                            Text="Online" TextChanged="ClientStatus_TextChanged">
                            <TextBox.Template>
                                <ControlTemplate TargetType="TextBox">
                                    <Border BorderThickness="0">
                                        <ContentPresenter VerticalAlignment="Top" HorizontalAlignment="Center"
                                              Margin="0,5,5,0"
                                              Content="{TemplateBinding Text}"></ContentPresenter>
                                    </Border>
                                </ControlTemplate>
                            </TextBox.Template>
                        </TextBox>

                        <!-- Status Indicate -->
                        <Ellipse x:Name="Indicator" Grid.Column="2" Grid.Row="1" Grid.RowSpan="2"
                                 Width="10" Height="10" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="0,5,0,0"
                                 Fill="Green" Stroke="{x:Null}" StrokeThickness="0"/>
                    </Grid>

                    <Button Grid.Column="0" Grid.Row="1" Content="Новости" Style="{StaticResource ResourceKey=MenuListButtonStyle}"
                            Click="NewsButton_Click"></Button>
                    <Button Grid.Column="0" Grid.Row="2" Content="Актуальные походы" Style="{StaticResource ResourceKey=MenuListButtonStyle}"
                            Click="HikingButton_Click"></Button>
                    <Button Grid.Column="0" Grid.Row="3" Content="Подготовка к походу" Style="{StaticResource ResourceKey=MenuListButtonStyle}"
                            Click="EquipmentButton_Click"></Button>
                    <Button Grid.Column="0" Grid.Row="4" Content="Настройки" Style="{StaticResource ResourceKey=MenuListButtonStyle}"
                            Click="SettingButton_Click"></Button>
                </Grid>

                <!--#endregion-->

            </Grid>
            
        </Grid>
        
        <!--#region Menu of Agent form-->
        <Grid x:Name="AgentMenu_grid" Grid.ColumnSpan="3" Grid.RowSpan="2"
                      IsEnabled="False" Visibility="Hidden">

            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition Width="720"></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions>
                <RowDefinition Height="30"></RowDefinition>
                <RowDefinition></RowDefinition>
                <RowDefinition Height="30"></RowDefinition>
            </Grid.RowDefinitions>

            <Rectangle x:Name="BackOfAgentMenu" Grid.ColumnSpan="3" Grid.RowSpan="3">
                <Rectangle.Fill>
                    <SolidColorBrush Color="Black" Opacity="0.9"></SolidColorBrush>
                </Rectangle.Fill>
            </Rectangle>

            <Rectangle x:Name="FrontOfAgentMenu" Grid.Column="1" Grid.Row="1"
                       RadiusX="25" RadiusY="25">
                <Rectangle.Fill>
                    <SolidColorBrush Color="Orange"></SolidColorBrush>
                </Rectangle.Fill>    
            </Rectangle>

            <Grid x:Name="FrontOfAgentMenu_grid" Grid.Column="1" Grid.Row="1"
                  Margin="15">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60"></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition Width="60"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                
                <Grid.RowDefinitions>
                    <RowDefinition Height="60"></RowDefinition>
                    <RowDefinition></RowDefinition>
                    <RowDefinition Height="60"></RowDefinition>
                </Grid.RowDefinitions>
                
                <!-- Back button -->
                <Button x:Name="BackFromAgentMenuButton" Grid.Column="2" Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center" 
                         Width="40" Height="40" Click="BackFromAgentMenuButton_Click">
                    
                    <Button.Template>
                        
                        <ControlTemplate TargetType="Button">
                            
                            <Border x:Name="BackFromAgentMenuButton_border" 
                                    Background="Transparent"
                                    BorderBrush="Black" BorderThickness="1" CornerRadius="20"
                                    Height="{TemplateBinding Height}" Width="{TemplateBinding Width}">
                                <Grid x:Name="FieldOfBackFromAgentMenuButton">
                                    <Path x:Name="ArrowIcon" Stroke="Black" StrokeThickness="3">
                                        <Path.Data>
                                            <PathGeometry>
                                                <PathFigure StartPoint="4,18" IsClosed="False">
                                                    <LineSegment Point="27,18"></LineSegment>
                                                </PathFigure>
                                                <PathFigure StartPoint="18,10" IsClosed="False">
                                                    <LineSegment Point="29,18"></LineSegment>
                                                    <LineSegment Point="18,26"></LineSegment>
                                                </PathFigure>
                                            </PathGeometry>
                                        </Path.Data>
                                    </Path>
                                </Grid>
                            </Border>
                            
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Trigger.Setters>
                                        <Setter TargetName="BackFromAgentMenuButton_border" Property="BorderBrush" Value="Gray"></Setter>
                                        <Setter TargetName="ArrowIcon" Property="Stroke" Value="DarkGray"></Setter>
                                        <Setter TargetName="BackFromAgentMenuButton_border" Property="Cursor" Value="Hand"/>
                                    </Trigger.Setters>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="true">
                                    <Trigger.Setters>
                                        <Setter TargetName="BackFromAgentMenuButton_border" Property="Opacity" Value="0.75"></Setter>
                                        <Setter TargetName="FieldOfBackFromAgentMenuButton" Property="Opacity" Value="0.75"/>
                                    </Trigger.Setters>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        
                        </ControlTemplate>
                    
                    </Button.Template>
                
                </Button>

            </Grid>

        </Grid>

        <!--#endregion-->

        <!--#region Registration plane-->

        <Grid x:Name="Person_Validate" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" 
              IsEnabled="False" Visibility="Hidden" Focusable="False">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*"></ColumnDefinition>
                <ColumnDefinition Width="500"></ColumnDefinition>
                <ColumnDefinition Width="1*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="1*"></RowDefinition>
                <RowDefinition Height="300"></RowDefinition>
                <RowDefinition Height="1*"></RowDefinition>
            </Grid.RowDefinitions>

            <Rectangle x:Name="background_of_register_log_control" Fill="Black" 
                       Opacity="0.99" RadiusX="10" RadiusY="10" 
                       Visibility ="{Binding Visibility, ElementName=Person_Validate}"  
                       IsEnabled="{Binding IsEnabled, ElementName=Person_Validate}"
                       Focusable="{Binding Focusable, ElementName=Person_Validate}"
                       Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Grid.ColumnSpan="3">
                <Rectangle.Effect>
                    <BlurEffect KernelType="Gaussian" Radius="20"></BlurEffect>
                </Rectangle.Effect>
            </Rectangle>

            <Grid x:Name="RegistrGrid" Grid.Column="1" Grid.Row="1">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.5*"></ColumnDefinition>
                    <ColumnDefinition Width="4*"></ColumnDefinition>
                    <ColumnDefinition Width="0.5*"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="0.25*"></RowDefinition>
                    <RowDefinition Height="4*"></RowDefinition>
                    <RowDefinition Height="55"></RowDefinition>
                    <RowDefinition Height="5"></RowDefinition>
                    <RowDefinition Height="55"></RowDefinition>
                    <RowDefinition Height="40"></RowDefinition>
                    <RowDefinition Height="0.5*"></RowDefinition>
                </Grid.RowDefinitions>

                <Rectangle x:Name="Registration_window" Fill="DarkOrange" 
                           Visibility ="{Binding Visibility, ElementName=Person_Validate}" 
                           IsEnabled="{Binding IsEnabled, ElementName=Person_Validate}"
                           RadiusX="25" RadiusY="25"
                           Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="3" Grid.RowSpan="7"/>

                <Label x:Name="login_label" Content="login:" Grid.Row="2" Grid.Column="1" Margin="15,0,0,0"
                       IsEnabled="{Binding IsEnabled, ElementName=Person_Validate}"
                       Focusable="{Binding Focusable, ElementName=Person_Validate}"
                       IsManipulationEnabled="False"
                       HorizontalAlignment="Left" VerticalAlignment="Top" Height="26"
                       FontSize="10" FontWeight="Bold" FontFamily="TimesNewRoman" FontStyle="Italic"/>

                <TextBox x:Name="Login_textbox" Grid.Row="2" Grid.Column="1" Margin="15,20,15,0" IsReadOnly="False" 
                         FontFamily="TimesNewRoman" FontSize="14" FontStyle="Italic" FontWeight="Bold" Foreground="Black" 
                         CaretBrush="Black" 
                         Visibility ="{Binding Visibility, ElementName=Person_Validate}" 
                         IsEnabled="{Binding IsEnabled, ElementName=Person_Validate}"
                         Focusable="{Binding Focusable, ElementName=Person_Validate}"
                         IsManipulationEnabled="True"
                         MouseEnter="Login_textbox_MouseEnter" TextChanged="Login_textbox_TextChanged">
                    <TextBox.Template>
                        <ControlTemplate TargetType="{x:Type TextBox}">
                            <Border Background="{x:Null}" BorderBrush="Black" BorderThickness="1" CornerRadius="10"
                                    ForceCursor="True" x:Name="Login_textbox_border">
                                <ScrollViewer Margin="3" x:Name="PART_ContentHost"/>
                            </Border>
                        </ControlTemplate>
                    </TextBox.Template>
                </TextBox>

                <Label x:Name="Signup_label" Content="Password:" Grid.Row="4" Grid.Column="1" Margin="15,0,0,0"  
                       HorizontalAlignment="Left" VerticalAlignment="Top" Height="26"
                       IsEnabled="{Binding IsEnabled, ElementName=Person_Validate}"
                       Focusable="{Binding Focusable, ElementName=Person_Validate}"
                       IsManipulationEnabled="False"
                       FontSize="10" FontWeight="Bold" FontFamily="TimesNewRoman" FontStyle="Italic"/>

                <PasswordBox x:Name="PasswordBox_UserPassword" Grid.Column="1" Grid.Row="4" Margin="15,20,15,0" 
                             Visibility ="{Binding Visibility, ElementName=Person_Validate}" IsEnabled="{Binding IsEnabled, ElementName=Person_Validate}">
                    <PasswordBox.Template>
                        <ControlTemplate TargetType="{x:Type PasswordBox}">
                            <Border Background="{x:Null}" BorderBrush="Black" BorderThickness="1" CornerRadius="10" ForceCursor="True">
                                <ScrollViewer Margin="5" x:Name="PART_ContentHost"/>
                            </Border>
                        </ControlTemplate>
                    </PasswordBox.Template>
                </PasswordBox>

                <Button x:Name="Log_In_button" Grid.Column="1" Grid.Row="5" Width="150" Height="26" HorizontalAlignment="Left" Margin="5,0,0,0" 
                         FontSize="10" FontWeight="Bold" FontFamily="TimesNewRoman" FontStyle="Italic" Content="Log in" Click="Log_In_button_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="Log_In_buttonBorder" BorderBrush="Black" BorderThickness="1" CornerRadius="10">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Content="{TemplateBinding Content}"></ContentPresenter>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Trigger.Setters>
                                        <Setter TargetName="Log_In_buttonBorder" Property="Cursor" Value="Hand"/>
                                    </Trigger.Setters>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="true">
                                    <Trigger.Setters>
                                        <Setter TargetName="Log_In_buttonBorder" Property="Opacity" Value="0.75"></Setter>
                                    </Trigger.Setters>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>

                <Button x:Name="Sign_up_button" Grid.Column="1" Grid.Row="5" Width="150" Height="26" HorizontalAlignment="Right" Margin="5,0,0,0" 
                         FontSize="10" FontWeight="Bold" FontFamily="TimesNewRoman" FontStyle="Italic" Content="Sign up" Click="Sign_up_button_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="Sign_up_buttonBorder" BorderBrush="Black" BorderThickness="1" CornerRadius="10">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Content="{TemplateBinding Content}"></ContentPresenter>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Trigger.Setters>
                                        <Setter TargetName="Sign_up_buttonBorder" Property="Cursor" Value="Hand"/>
                                    </Trigger.Setters>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="true">
                                    <Trigger.Setters>
                                        <Setter TargetName="Sign_up_buttonBorder" Property="Opacity" Value="0.75"></Setter>
                                    </Trigger.Setters>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>
        </Grid>

        <!--#endregion-->

    </Grid>
    
</Window>
